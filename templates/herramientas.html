{% extends "layout.html" %}

{% block contenido %}
<h1>Herramientas</h1>

{% if current_user.es_admin() %}
<button class="btn" onclick="document.getElementById('modalAddHerr').style.display='block'">
    Agregar Herramienta
</button>
{% endif %}

<!-- TABLA ACTUALIZADA -->
<table class="tabla-herramientas">
    <thead>
        <tr>
            <th>Nombre</th>
            <th>Código</th>
            <th>Total</th>
            <th>Disponible</th>
            {% if current_user.es_admin() %}
            <th>Acciones</th>
            {% endif %}
        </tr>
    </thead>

    <tbody>
        {% for h in herramientas %}
        <tr>
            <td>{{ h.nombre }}</td>
            <td>{{ h.codigo }}</td>
            <td>{{ h.cantidad_total }}</td>
            <td>{{ h.cantidad_disponible }}</td>

            {% if current_user.es_admin() %}
            <td>
                <button class="btn"
                    onclick="abrirModalEditar(
                        '{{h.id}}',
                        '{{h.nombre}}',
                        '{{h.codigo}}',
                        '{{h.cantidad_total}}',
                        '{{h.cantidad_disponible}}'
                    )">
                    Editar
                </button>

                <form action="{{ url_for('herramientas.eliminar_herramienta', id=h.id) }}"
                      method="POST" style="margin-top:5px;">
                    <button class="btn-danger" onclick="return confirm('¿Eliminar herramienta?')">
                        Eliminar
                    </button>
                </form>
            </td>
            {% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>

{% include 'modals/modal_add_herramienta.html' %}
{% include 'modals/modal_edit_herramienta.html' %}

{% endblock %}