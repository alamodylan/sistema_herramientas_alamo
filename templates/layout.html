<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Sistema Herramientas Álamo</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>

<body>

    <!-- NAVBAR PRINCIPAL -->
    <nav class="navbar">
        <div class="left">
            <strong>Sistema Herramientas Álamo</strong>
        </div>
        <div class="right">
            <a href="{{ url_for('bodega.bodega') }}">Bodega</a>
            <a href="{{ url_for('mecanicos.lista_mecanicos') }}">Mecánicos</a>
            <a href="{{ url_for('herramientas.lista_herramientas') }}">Herramientas</a>
            <a href="{{ url_for('historial.historial') }}">Historial</a>
            <a href="{{ url_for('auth.logout') }}">Salir</a>
        </div>
    </nav>

    <!-- CONTENEDOR PRINCIPAL -->
    <div class="container">

        <!-- MENSAJES FLASH -->
        {% with mensajes = get_flashed_messages(with_categories=true) %}
        {% if mensajes %}
            {% for categoria, mensaje in mensajes %}
                <div class="alert-{{ categoria }}">
                    {{ mensaje }}
                </div>
            {% endfor %}
        {% endif %}
        {% endwith %}

        <!-- CONTENIDO DE CADA PÁGINA -->
        {% block contenido %}{% endblock %}
    </div>

    <!-- =========================================== -->
    <!--   CONTENEDOR GLOBAL PARA NOTIFICACIONES     -->
    <!-- =========================================== -->
    <div id="toast" class="toast"></div>

    <!-- JS GLOBAL -->
    <script src="{{ url_for('static', filename='js/auth.js') }}"></script>

    <!-- =========================================== -->
    <!--    FUNCIÓN GLOBAL PARA MOSTRAR TOASTS       -->
    <!-- =========================================== -->
    <script>
    function showToast(msg, tipo="ok") {
        const t = document.getElementById("toast");

        t.textContent = msg;
        t.className = "toast " + tipo;
        t.style.display = "block";

        setTimeout(() => {
            t.style.display = "none";
        }, 1600);
    }
    </script>

    {% block scripts %}{% endblock %}

    <!-- =================================================== -->
    <!-- FUNCIÓN PARA ABRIR MODAL DE EDITAR HERRAMIENTA      -->
    <!-- =================================================== -->
    <script>
    function abrirModalEditar(id, nombre, codigo, cantidad_total, cantidad_disponible) {

        // Asignar los valores al modal
        document.getElementById("edit_nombre").value = nombre;
        document.getElementById("edit_codigo").value = codigo;
        document.getElementById("edit_cantidad_total").value = cantidad_total;

        // Cambiar la acción del formulario
        const form = document.getElementById("formEditHerr");
        form.action = "/herramientas/editar/" + id;

        // Mostrar el modal
        document.getElementById('modalEditHerr').style.display = 'block';
    }
    </script>

</body>
</html>